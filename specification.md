# オンライン早押し英語クイズアプリ 仕様書

このドキュメントは、3人で対戦できるオンライン早押しクイズアプリの設計と仕様をまとめたものです。

## 1. アプリの概要
- **目的**: 3人のプレイヤーが同時に同じクイズに参加し、早押しで競い合う。
- **特徴**: 専用のサーバー構築なしで、URL共有のみで手軽に遊べる（Supabase利用）。
- **対象**: 英語学習者やクイズ愛好家。

## 2. 画面構成と機能

### A. 待機画面
- URLにアクセスすると表示される画面。
- 3人が揃うのを待つ。
- 全員揃ったらゲーム画面へ（または「スタート」ボタンで開始）。

### B. 対戦画面（メイン画面）
画面は以下の要素で構成されます：

1.  **ステータス表示エリア**
    -   参加者3人の名前（またはPlayer 1-3）と現在のスコアを表示。
    -   誰が「回答権」を持っているかを視覚的に強調（色が変わるなど）。

2.  **クイズ表示エリア**
    -   問題文が表示されます。
    -   最初は「Start」ボタンのみ表示。
    -   出題後は問題文が表示され、回答待ち状態。

3.  **操作ボタンエリア**
    -   **早押しボタン**: 自分が回答権を持っていない、かつ誰も押していない時に押せる大きなボタン。
        -   誰かが押すと、その人の画面に「回答権！」と表示され、他の人は押せなくなる。
    -   **進行ボタン群**（全員または回答権者に表示）:
        -   **Start**: 次の問題を表示する。
        -   **Answer**: 問題の正解を表示する。
        -   **Bingo!**: 回答が正しかった場合に押す（スコア+1）。
        -   **Wrong!**: 回答が間違っていた場合に押す（スコア-1、次の問題で回答権なし）。

### C. クイズのルールと流れ
1.  **出題**:
    -   「Start」ボタンで問題がランダムに選ばれ、全員の画面に同期して表示されます。
    -   一度出題された問題は、その後100問出題されるまで再登場しません。
2.  **早押し**:
    -   誰かがボタンを押すと、0.1秒以下の誤差で判定し、一番早かった1名に回答権が与えられます。
    -   他のプレイヤーのボタンはロックされます。
3.  **回答と判定**:
    -   回答者は口頭で答え、「答えを表示」ボタンで正解を確認します。
    -   「正解」なら+1ポイント。
    -   「不正解」なら-1ポイントとなり、**次の問題ではそのプレイヤーはボタンを押せなくなります**（お休み）。
4.  **時間制限**:
    -   出題から20秒間誰も押さなかった場合、自動的にタイムアウトとなり、次の問題へ進む準備状態になります。

## 4. 効果音 (SE)
- **早押し音**: ボタンを押して回答権を得た時に再生。
- **タイムアウト音**: 20秒経過した時に再生。

## 5. 技術的な仕組み（概要）
- **リアルタイム通信**: 「Supabase Realtime」という技術を使い、3人の画面を一瞬で同期させます（ボタンを押したタイミング、問題の表示など）。
- **データ管理**: 問題文はアプリ内の `qa.json` というファイルから読み込みます。
- **動作環境**: PCやスマホのブラウザ（Chrome, Safariなど）で動作します。

## 6. 今後の進め方
1.  この仕様で問題なければ、プログラムの実装に入ります。
2.  まずは画面の見た目を作り、次に通信機能を組み込みます。
3.  早押し音とタイムアウト音の素材を準備します。
4.  最後にテストを行い、完成となります。

---
**ご確認事項**:
- 上記の仕様でイメージ通りでしょうか？
- 追加したい機能や変更点はありますか？
